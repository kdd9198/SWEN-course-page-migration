{{ define "main" }}
<article class="markdown post">
  <h1>{{ .Title | title }}</h1>
  {{ $taxonomies := index .Site.Taxonomies .Page.Type }}
  {{ range $taxonomies }}
    <div><a href="{{ .Page.Permalink }}">{{ .Page.Title }} <sup>{{ .Count }}</sup></a></div>
  {{ end }}
</article>
{{ end }}

{{ define "toc" }}
    <nav>
        <ul>
            {{ range $term, $_ := .Site.Taxonomies }}
                {{ with $.Site.GetPage (printf "/%s" $term | urlize) }}
                    <li class="section-flat">
                        <span>{{ .Title | title }}</span>
                        <ul>
                            {{ range .Pages }}
                                <li class="flex justify-between">
                                    <a href="{{ .RelPermalink }}">{{ .Title }}</a>
                                    <span>{{ len .Pages }}</span>
                                </li>
                            {{ end }}
                        </ul>
                    </li>
                {{ end }}
            {{ end }}
        </ul>
    </nav>
{{ end }}